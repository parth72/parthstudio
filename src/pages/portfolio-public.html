<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Parth — Portfolio</title>

<link rel="stylesheet" href="../css/tokens.css">
<link rel="stylesheet" href="../css/components.css">
<link rel="stylesheet" href="../css/styles.css">

<style>
  /* page-specific overrides / layout that match locked visual direction */
  :root{
    --hero-h: 780px;
    --accent: #6fb0d9;
    --muted: rgba(255,255,255,0.55);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(140deg,#071418,#0c252c);color:#eaf6ff;-webkit-font-smoothing:antialiased}
  .container{max-width:1100px;margin:36px auto;padding:0 20px}
  .hero{
    height:var(--hero-h); border-radius:14px;
    background:
      linear-gradient(180deg, rgba(0,0,0,0.25), rgba(2,6,8,0.45)),
      url('../assets/portfolio-hero.jpg') center/cover no-repeat;
    display:grid; grid-template-columns: 1fr 420px; gap:24px; align-items:center; padding:48px;
    box-shadow:0 30px 80px rgba(2,8,12,0.6); border:1px solid rgba(255,255,255,0.02);
  }
  .hero-left { padding-right:12px; }
  .hero h1{font-size:48px;margin:0 0 8px 0; letter-spacing:-0.02em}
  .hero p.lead{color:var(--muted); margin:8px 0 20px; max-width:560px}
  .service-grid{display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:20px}
  .service-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.03)}
  .hero-right{display:flex;flex-direction:column;gap:18px}
  .cta{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:#052226;font-weight:700;cursor:pointer}

  /* stats area */
  .stats{display:flex;gap:28px;align-items:center;margin:36px 0}
  .stat{display:flex;flex-direction:column;gap:6px}
  .stat .num{font-size:36px;font-weight:700;color:#9ad1ef}
  .stat .label{color:var(--muted);font-size:13px}

  /* projects grid */
  .projects{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-bottom:36px}
  .proj{height:180px;border-radius:12px;overflow:hidden;background:#061217;display:flex;align-items:flex-end;padding:12px;border:1px solid rgba(255,255,255,0.02)}
  .proj h4{margin:0;color:#eaf6ff}

  /* contact form */
  .contact{display:grid;grid-template-columns:1fr 420px;gap:24px;margin-bottom:60px;align-items:start}
  .contact .copy{color:var(--muted)}
  .form{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
  .form .row{margin-bottom:12px}
  input, textarea, select { width:100%; padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04); background:rgba(255,255,255,0.02);color:#eaf6ff; box-sizing:border-box }
  textarea{min-height:120px; resize:vertical}
  .btn { display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:#052226;font-weight:700;border:none;cursor:pointer }

  /* footer */
  footer{padding:40px 0;text-align:center;color:var(--muted);font-size:14px}

  @media (max-width:980px){
    .hero{grid-template-columns:1fr;padding:32px;height:auto}
    .projects{grid-template-columns:1fr 1fr}
    .contact{grid-template-columns:1fr;padding:0}
  }
  @media (max-width:560px){
    .projects{grid-template-columns:1fr}
    .hero h1{font-size:32px}
  }
</style>
</head>
<body>

<!-- NOTE:
  - Ensure ../assets/portfolio-hero.jpg and project thumbnails exist (or change paths).
  - env.js should set SUPABASE_URL, SUPABASE_ANON_KEY and optional LEAD_WEBHOOK_URL.
-->

<div class="container" role="main">
  <!-- HERO -->
  <section class="hero" aria-label="Hero">
    <div class="hero-left">
      <h1>What can I do</h1>
      <p class="lead">Creative conceptions, shooting & editing, motion graphics — I build cinematic visuals and polished delivery for brands and films.</p>

      <div class="service-grid" aria-hidden="false">
        <div class="service-card">
          <h4>Shooting & Editing</h4>
          <p class="copy" style="margin:8px 0 0">High-end shooting and fast, clean edits for web and broadcast.</p>
        </div>
        <div class="service-card">
          <h4>Motion Graphics</h4>
          <p class="copy" style="margin:8px 0 0">Title sequences, product animations, and UI motion design.</p>
        </div>
      </div>
    </div>

    <aside class="hero-right" aria-hidden="false">
      <div style="background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03)">
        <div style="font-size:13px;color:var(--muted)">Parth — Filmmaker & Motion Designer</div>
        <div style="margin-top:8px"><span class="cta" id="cta-contact">Contact</span></div>
      </div>

      <div style="background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);color:var(--muted)">
        <div style="font-weight:700">Selected work</div>
        <div class="mini" style="margin-top:8px">Recent projects and editorials</div>
      </div>
    </aside>
  </section>

  <!-- STATS -->
  <section class="stats" aria-label="Stats">
    <div class="stat"><div class="num">16</div><div class="label">awards</div></div>
    <div class="stat"><div class="num">80+</div><div class="label">projects</div></div>
    <div class="stat"><div class="num">4</div><div class="label">years</div></div>
  </section>

  <!-- PROJECTS -->
  <section>
    <h2 style="margin:0 0 14px 0">Latest Projects</h2>
    <div class="projects" aria-live="polite">
      <!-- placeholders — swap images in /public/src/assets/ -->
      <div class="proj" style="background-image:url('../assets/p1.jpg'); background-size:cover;"><h4>Project — The Bridge</h4></div>
      <div class="proj" style="background-image:url('../assets/p2.jpg'); background-size:cover;"><h4>Project — LightStudy</h4></div>
      <div class="proj" style="background-image:url('../assets/p3.jpg'); background-size:cover;"><h4>Project — Motion Lab</h4></div>
    </div>
  </section>

  <!-- CONTACT FORM -->
  <section class="contact" id="contact-section" aria-label="Contact">
    <div>
      <h2 style="margin:0 0 8px 0">Start your project</h2>
      <p class="copy">Tell me about your brief — leave email & a short description. I’ll get back within 48 hours.</p>
      <div style="margin-top:14px;color:var(--muted)">Prefer direct? <a href="mailto:parth@studio.me" style="color:var(--accent)">parth@studio.me</a></div>
    </div>

    <form id="contactForm" class="form" autocomplete="on" novalidate>
      <div class="row">
        <label for="c_name">Full name</label>
        <input id="c_name" name="name" type="text" placeholder="Your name" required>
      </div>

      <div class="row">
        <label for="c_email">Email</label>
        <input id="c_email" name="email" type="email" placeholder="you@example.com" required>
      </div>

      <div class="row">
        <label for="c_message">Project brief</label>
        <textarea id="c_message" name="message" placeholder="Short description — timeline, budget, deliverables" required></textarea>
      </div>

      <div class="row" style="display:flex;gap:8px;align-items:center">
        <button class="btn" type="submit" id="contactSubmit">Send</button>
        <div id="formStatus" style="color:var(--muted);font-size:14px"></div>
      </div>
    </form>
  </section>

  <footer>
    © <span id="year"></span> Parth — Crafted with care · <span style="color:var(--muted)">Portfolio (public)</span>
  </footer>
</div>

<!-- scripts -->
<script src="/public/env.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
<script>
/*
  Contact behaviour:
  - If window.LEAD_WEBHOOK_URL provided -> POST JSON { name,email,message,source:'portfolio',created_at }
  - Else, if SUPABASE_URL + SUPABASE_ANON_KEY present -> insert into 'leads' table.
  - Minimal validation + UX.
*/

document.getElementById('year').textContent = new Date().getFullYear();

const LEAD_WEBHOOK_URL = window.LEAD_WEBHOOK_URL || '';
const SUPABASE_URL = window.SUPABASE_URL || '';
const SUPABASE_ANON_KEY = window.SUPABASE_ANON_KEY || '';

const contactForm = document.getElementById('contactForm');
const submitBtn = document.getElementById('contactSubmit');
const statusBox = document.getElementById('formStatus');
const ctaContact = document.getElementById('cta-contact');

ctaContact?.addEventListener('click', () => {
  document.getElementById('c_name').focus();
});

// helper
function setStatus(text, isError){
  statusBox.textContent = text || '';
  statusBox.style.color = isError ? '#ff9b9b' : 'var(--muted)';
}

// disable/enable
function setBusy(on){
  submitBtn.disabled = on;
  submitBtn.style.opacity = on ? 0.7 : 1;
  submitBtn.textContent = on ? 'Sending…' : 'Send';
}

async function sendToWebhook(payload){
  const res = await fetch(LEAD_WEBHOOK_URL, {
    method:'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });
  if(!res.ok) throw new Error('Webhook failed: ' + res.status);
  return res;
}

async function insertToSupabase(payload){
  if(!SUPABASE_URL || !SUPABASE_ANON_KEY) throw new Error('Supabase env not provided');
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  const { data, error } = await supabase.from('leads').insert(payload).select();
  if(error) throw error;
  return data;
}

contactForm.addEventListener('submit', async function(e){
  e.preventDefault();
  setStatus('');
  const name = (document.getElementById('c_name').value || '').trim();
  const email = (document.getElementById('c_email').value || '').trim();
  const message = (document.getElementById('c_message').value || '').trim();

  if(!name || !email || !message){
    setStatus('Please fill all fields', true);
    return;
  }

  const payload = {
    name, email, message,
    status: 'new',
    source: 'portfolio',
    created_at: new Date().toISOString()
  };

  try {
    setBusy(true);
    if(LEAD_WEBHOOK_URL){
      await sendToWebhook(payload);
    } else {
      await insertToSupabase(payload);
    }
    setStatus('Thanks — I got it. I will reply soon.');
    contactForm.reset();
  } catch(err){
    console.error('lead submit', err);
    setStatus('Send failed — try again or email directly', true);
  } finally {
    setBusy(false);
  }
});
</script>
</body>
</html>
